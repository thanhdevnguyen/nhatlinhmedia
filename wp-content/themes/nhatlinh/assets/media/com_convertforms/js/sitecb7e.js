function _createForOfIteratorHelperLoose(e,t){var r;if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator])return(r=e[Symbol.iterator]()).next.bind(r);if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}"undefined"==typeof Joomla&&(Joomla={},function(c,u){"use strict";c.Text={strings:{},_:function(e,t){var r=c.getOptions("joomla.jtext");return r&&(this.load(r),c.loadOptions({"joomla.jtext":null})),t=void 0===t?"":t,e=e.toUpperCase(),void 0!==this.strings[e]?this.strings[e]:t},load:function(e){for(var t in e)e.hasOwnProperty(t)&&(this.strings[t.toUpperCase()]=e[t]);return this}},c.JText=c.Text,c.optionsStorage=c.optionsStorage||null,c.getOptions=function(e,t){return c.optionsStorage||c.loadOptions(),void 0!==c.optionsStorage[e]?c.optionsStorage[e]:t},c.loadOptions=function(e){if(!e){for(var t,r,o,n=u.querySelectorAll(".joomla-script-options.new"),a=0,i=0,s=n.length;i<s;i++)t=(r=n[i]).text||r.textContent,(o=JSON.parse(t))&&(c.loadOptions(o),a++),r.className=r.className.replace(" new"," loaded");if(a)return}if(c.optionsStorage){if(e)for(var l in e)e.hasOwnProperty(l)&&(c.optionsStorage[l]=e[l])}else c.optionsStorage=e||{}}}(Joomla,document)),function(o,n){"use strict";var a={getCSRFToken:function(){var e=Joomla.getOptions("csrf.token");return e||ConvertFormsConfig.token},getBaseURL:function(){var e=Joomla.getOptions("system.paths");return e?e.root+"/":o.location.pathname},getFormData:function(e){for(var t,r=new FormData(e),o=new FormData,n=_createForOfIteratorHelperLoose(r);!(t=n()).done;){var a=t.value,i=a[0],s=a[1],l=e.querySelector('.cf-input[name="'+i+'"]');l&&(!l||l.closest(".cf-control-group.cf-ignore"))||o.append(i,s)}return o},serializeFormData:function(e,t){t=t||!1;for(var r,o=[],n=_createForOfIteratorHelperLoose(e.entries());!(r=n()).done;){var a,i=r.value,s=i[0],l=i[1];t&&-1<s.indexOf("cf[")&&(a=-1<s.indexOf("[]"),s=s.match(/cf\[(.*?)\]/)[1],a&&(s+="[]")),o.push(encodeURIComponent(s)+"="+encodeURIComponent(l))}return o.join("&")},isInViewport:function(e){var t=e.getBoundingClientRect();return 0<=t.top&&0<=t.left&&t.bottom<=(o.innerHeight||n.documentElement.clientHeight)&&t.right<=(o.innerWidth||n.documentElement.clientWidth)},emitEvent:function(e,t,r){var o=new CustomEvent(e,{detail:r,cancelable:!0});return t.dispatchEvent(o),o},request:function(t){t=a.extend({url:"",method:"POST",headers:null,data:null,onSuccess:null,onError:null,onFail:null},t);try{var r=new XMLHttpRequest;if(r.open(t.method,t.url,!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("X-Ajax-Engine","Convert Forms!"),t.headers)for(var e in t.headers)t.headers.hasOwnProperty(e)&&r.setRequestHeader(e,t.headers[e]);if(r.onload=function(){4===r.readyState&&(200===r.status?t.onSuccess&&t.onSuccess.call(o,r.responseText,r):t.onError&&t.onError.call(o,r.responseText,r),t.onComplete&&t.onComplete.call(o,r))},t.onBefore&&!1===t.onBefore.call(o,r))return r;r.send(t.data)}catch(e){return t.onFail&&t.onFail.call(o,e,r),console.error(e),!1}return r},extend:function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},capitalize:function(e){return"string"!=typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)},browserIsIE:function(){var e=o.navigator.userAgent,t=e.indexOf("MSIE "),r=e.indexOf("Trident/index.html");return 0<t||0<r},loadScript:function(e,t){var r=n.head,o=n.createElement("script");o.type="text/javascript",o.src=e,o.onreadystatechange=t,o.onload=t,r.appendChild(o)},onReady:function(e){"loading"==n.readyState?n.addEventListener("DOMContentLoaded",e):e()},toggleCheck:function(e,t){var r;e&&(r=!1,!e.checked&&t&&(r=e.checked=!0),e.checked&&!t&&(r=!(e.checked=!1)),r&&a.emitChange(e))},setValue:function(e,t){e.value!=t&&(e.value=t,a.emitChange(e))},emitChange:function(e){e.dispatchEvent(new Event("change",{bubbles:!0}))}};o.ConvertForms=o.ConvertForms||[],o.ConvertForms.Helper=a}(window,document),function(l,c){"use strict";var o=function(a){var i={selector:a},s=l.ConvertForms.Helper,n=a.querySelector("form");i.getFieldsWithOverriddenRequiredAttribute=function(){var t={};return a.querySelectorAll(".cf-control-group[data-required-override]").forEach(function(e){t[e.dataset.key]=e.dataset.requiredOverride}),t},i.getFormData=function(){var e=s.getFormData(n),t={},r=i.getFieldsWithOverriddenRequiredAttribute();return Object.keys(r).length&&(t.required=r),Object.keys(t).length&&e.set("overrides",JSON.stringify(t)),e},i.submit=function(){var e=i.emitEvent("beforeSubmit");e.defaultPrevented?e.detail.hasOwnProperty("error")&&i.throwError(e.detail.error):s.request({url:s.getBaseURL()+"?option=com_convertforms&task=submit",headers:{"X-CSRF-Token":s.getCSRFToken()},data:i.getFormData(),onBefore:function(){a.classList.add("cf-working"),a.classList.add("cf-disabled"),a.classList.remove("cf-error"),a.classList.remove("cf-success"),a.querySelector(".cf-response").removeAttribute("role")},onSuccess:function(t,e){try{t=JSON.parse(t)}catch(e){var r=t.match('{"convertforms"(.*?)}$');if(null==r)return void i.throwError(i.text("INVALID_RESPONSE")+": "+t);t=JSON.parse(r[0])}if(t.success){i.emitEvent("success",{response:t,xhr:e});var o="formTask"+s.capitalize(t.task);if(!i.hasOwnProperty(o))return void i.throwError(i.text("INVALID_TASK")+": "+o);i[o].call(l,t),i.emitEvent("afterTask",{response:t,xhr:e,task:t.task})}else{i.emitEvent("error",{response:t,xhr:e}),i.throwError(t.error);var n=a.querySelector(".cf-fields .cf-input");n&&n.focus()}},onComplete:function(e){i.emitEvent("afterSubmit",{xhr:e}),a.classList.remove("cf-working","cf-disabled"),s.isInViewport(a)||a.scrollIntoView()},onError:function(e){i.throwError("Error: "+e)},onFail:function(e){i.throwError("Fail: "+e)}})},i.emitEvent=function(e,t,r){var o;if(e)return(t=t||{}).instance=i,(r=r||!0)&&(o="ConvertForms"+s.capitalize(e),s.emitEvent(o,c,t)),s.emitEvent(e,a,t)},i.formTaskMsg=function(e){a.classList.add("cf-success"),a.querySelector(".cf-response").innerHTML=e.value,"1"==e.resetform&&n.reset()},i.formTaskUrl=function(e){var t,r,o=e.value;"1"==e.passdata&&(t=s.getFormData(n),r=s.serializeFormData(t,!0),o+=(-1<e.value.indexOf("?")?"&":"?")+r),l.location.href=o},i.throwError=function(e){a.classList.add("cf-error");var t=a.querySelector(".cf-response");t.innerHTML=e,t.setAttribute("role","alert")},i.text=function(e){return Joomla.JText._("COM_CONVERTFORMS_"+e)};return a.classList.contains("cf-init")||(l.IntersectionObserver&&new IntersectionObserver(function(e,t){e.forEach(function(e){e.isIntersecting&&(i.emitEvent("impression",{entry:e}),t.unobserve(e.target))})},{rootMargin:"0px 0px 0px 0px"}).observe(a),n.addEventListener("submit",function(e){e.preventDefault(),i.submit(e)}),a.classList.add("cf-init")),a.ConvertForms=i};l.ConvertForms=l.ConvertForms||[];var n=l.ConvertForms.Helper;function e(){for(var e=c.querySelectorAll(".convertforms"),t=0;t<e.length;t++){var r=e[t];o(r)}n.emitEvent("ConvertFormsInit",c,e)}n.onReady(function(){n.browserIsIE()?n.loadScript("../../../polyfill.io/v3/polyfill.mina0ca.js?ua=Mozilla/5.0%20(Windows%20NT%2010.0;%20WOW64;%20Trident/7.0;%20rv:11.0)%20like%20Gecko&amp;features=String.prototype.includes%2CElement.prototype.closest%2CCustomEvent%2CNodeList.prototype.forEach%2CObject.values%2CString.prototype.startsWith%2CString.prototype.endsWith",function(){n.loadScript("../../../cdn.jsdelivr.net/npm/formdata-polyfill%403.0.20/formdata.min.js",e)}):e()})}(window,document),document.addEventListener("ConvertFormsInit",function(e){var t,c,u;"undefined"!=typeof Dropzone&&(t=e.detail,c=ConvertForms.Helper.getBaseURL()+"?option=com_ajax&format=raw&plugin=convertforms&task=field&field_type=fileupload",u=ConvertForms.Helper.getCSRFToken(),Dropzone.autoDiscover=!1,Dropzone.prototype.defaultOptions.dictFallbackMessage=Joomla.JText._("COM_CONVERTFORMS_UPLOAD_FALLBACK_MESSAGE"),Dropzone.prototype.defaultOptions.dictFileTooBig=Joomla.JText._("COM_CONVERTFORMS_UPLOAD_FILETOOBIG"),Dropzone.prototype.defaultOptions.dictInvalidFileType=Joomla.JText._("COM_CONVERTFORMS_UPLOAD_INVALID_FILE"),Dropzone.prototype.defaultOptions.dictResponseError=Joomla.JText._("COM_CONVERTFORMS_UPLOAD_RESPONSE_ERROR"),Dropzone.prototype.defaultOptions.dictCancelUpload=Joomla.JText._("COM_CONVERTFORMS_UPLOAD_CANCEL_UPLOAD"),Dropzone.prototype.defaultOptions.dictCancelUploadConfirmation=Joomla.JText._("COM_CONVERTFORMS_UPLOAD_CANCEL_UPLOAD_CONFIRMATION"),Dropzone.prototype.defaultOptions.dictRemoveFile=Joomla.JText._("COM_CONVERTFORMS_UPLOAD_REMOVE_FILE"),Dropzone.prototype.defaultOptions.dictMaxFilesExceeded=Joomla.JText._("COM_CONVERTFORMS_UPLOAD_MAX_FILES_EXCEEDED"),t.forEach(function(s){var e=s.querySelectorAll(".cfupload"),l=[];e.forEach(function(n){var e=n.closest(".cf-control-input").querySelector(".cfup-tmpl"),t=e.innerHTML;e.closest(".cf-control-input").removeChild(e);var r=(r=parseFloat(n.getAttribute("data-maxfilesize")))||null,o=(o=parseInt(n.getAttribute("data-maxfiles")))||null,a=s.querySelector("button.cf-btn"),i=new Dropzone(n,{url:c,previewTemplate:t,maxFilesize:r,uploadMultiple:1!=o,maxFiles:o,acceptedFiles:n.getAttribute("data-acceptedfiles"),autoProcessQueue:!0,parallelUploads:1,filesizeBase:1e3,createImageThumbnails:!1,timeout:36e5});a&&(i.on("queuecomplete",function(){a.classList.remove("cf-disabled")}),i.on("processing",function(){a.classList.add("cf-disabled")})),i.on("sending",function(e,t,r){r.append("form_id",n.closest("form").querySelector("input[name='cf[form_id]']").value),r.append("field_key",n.getAttribute("data-key")),t.setRequestHeader("X-CSRF-Token",u),r.append(u,1)}),i.on("success",function(e){var t=e.xhr.response;try{t=JSON.parse(t)}catch(e){var r=t.match(/{([^}]*)}/i);null!==r?t=JSON.parse(r[0]):alert("Error! "+e+"<br>"+t)}var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name",n.dataset.name),o.setAttribute("value",t.file),e.previewTemplate.appendChild(o)}),l.push(i)}),s.addEventListener("beforeSubmit",function(e){var o;e.defaultPrevented||(o=0,l.forEach(function(e){var t=e.getQueuedFiles().length,r=e.getUploadingFiles().length;o=o+t+r}),0<o&&(e.preventDefault(),e.detail.error=e.detail.instance.text("ERROR_WAIT_FILE_UPLOADS")))}),s.addEventListener("success",function(){l.forEach(function(e){e.removeAllFiles()})})}))}),document.addEventListener("ConvertFormsInit",function(e){"undefined"!=typeof Inputmask&&e.detail.forEach(function(e){var o=e.querySelectorAll(".cf-input[data-inputmask-mask]");o&&(Inputmask("",{jitMasking:!1,showMaskOnHover:!1}).mask(o),e.addEventListener("beforeSubmit",function(e){if(!e.defaultPrevented)for(var t=0;t<o.length;t++){var r=o[t];if(!r.hasAttribute("required"))return;if(!r.inputmask.isComplete()){e.preventDefault(),e.detail.error=e.detail.instance.text("ERROR_INPUTMASK_INCOMPLETE"),r.focus();break}}}))})});
